<include file="public/layout" />

<body style="background-color: rgb(255, 255, 255); overflow: auto; cursor: default; -moz-user-select: inherit;">
    <div id="append_parent"></div>
    <div id="ajaxwaitid"></div>
    <div class="page">
        <div class="fixed-bar">
            <div class="item-title">
                <div class="subject">
                    <h3>合伙人商品管理</h3>
                    <h5>网站系统合伙人索引与管理</h5>
                </div>
            </div>
        </div>
        <!-- 操作说明 -->

        <div class="flexigrid">
            <div class="mDiv">
                <div class="ftitle">
                    <h3>合伙人商品列表</h3>
                    <!-- <h5>(共10000条记录)</h5> -->
                </div>
                <!-- <div title="刷新数据" class="pReload"><i class="fa fa-refresh"></i></div> -->
            </div>
            <div class="hDiv">
                <div class="hDivBox">
                    <table cellspacing="0" cellpadding="0">
                        <thead>
                            <tr>
                                <th class="sign" axis="col0">
                                    <div style="width: 24px;"><i class="ico-check"></i></div>
                                </th>
                                <th align="left" abbr="article_title" axis="col3" class="">
                                    <div style="text-align: left; width: 100px;" class="">商品id</div>
                                </th>
                                <th align="left" abbr="article_title" axis="col3" class="">
                                    <div style="text-align: left; width: 100px;" class="">商品编号</div>
                                </th>
                                <th align="center" abbr="ac_id" axis="col4" class="">
                                    <div style="text-align: center; width: 100px;" class="">商品名称</div>
                                </th>
                                <th align="center" abbr="article_show" axis="col5" class="">
                                    <div style="text-align: center; width: 100px;" class="">商品价格</div>
                                </th>
                                <th align="center" abbr="article_show" axis="col5" class="">
                                    <div style="text-align: center; width: 100px;" class="">库存</div>
                                </th>
                                <th align="center" abbr="article_show" axis="col5" class="">
                                    <div style="text-align: center; width: 100px;" class="">是否上架</div>
                                </th>
                                <th align="center" axis="col1" class="handle">
                                    <div style="text-align: center; width: 150px;">操作</div>
                                </th>
                                <th style="width:100%" axis="col7">
                                    <div></div>
                                </th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
            <div class="tDiv">
                <div class="tDiv2">
                    <div class="fbutton"> <a href="{:url('partner/addgoods')}">
                            <div class="add" title="新增商品">
                                <span><i class="fa fa-plus"></i>新增商品</span>
                            </div>
                        </a> </div>


                </div>
                <div style="clear:both"></div>
            </div>
            <div class="bDiv" style="height: auto;">
                <div id="flexigrid" cellpadding="0" cellspacing="0" border="0">
                    <table>
                        <tbody>
                            <foreach name="list" item="vo" key="k">
                                <tr>
                                    <td class="sign">
                                        <div style="width: 24px;"><i class="ico-check"></i></div>
                                    </td>
                                    <td align="left" class="">
                                        <div style="text-align: left; width: 100px;">{$vo.goods_id}</div>
                                    </td>
                                    <td align="left" class="">
                                        <div style="text-align: left; width: 100px;">{$vo.goods_sn}</div>
                                    </td>
                                    <td align="center" class="">
                                        <div style="text-align: center; width:100px;">{$vo.goods_name}</div>
                                    </td>
                                    <td align="center" class="">
                                        <div style="text-align: center; width:100px;">{$vo.shop_price}</div>
                                    </td>
                                    <td align="center" class="">
                                        <div style="text-align: center; width:100px;">{$vo.store_count}</div>
                                    </td>
                                    <td align="center" class="">
                                        <div style="text-align: center; width: 100px;">
                                            <if condition="$vo.is_on_sale eq 1">
                                                <span class="yes" onclick="changegoods({$vo.goods_id},this)"
                                                    value="2"><i class="fa fa-check-circle"></i>是</span>
                                                <else />
                                                <span class="no" onclick="changegoods({$vo.goods_id},this)" value="1"><i
                                                        class="fa fa-ban"></i>否</span>
                                            </if>
                                        </div>
                                    </td>
                                    <td align="center" class="handle">
                                        <div style="text-align: center; width: 170px; max-width:170px;">
                                            <a href="{:url('partner/addgoods?goods_id='.$vo.goods_id)}"
                                                class="btn blue"><i class="fa fa-pencil-square-o"></i>编辑</a>
                                            <a href="{:url('partner/addimgs?goods_id='.$vo.goods_id)}"
                                                class="btn blue"><i class="fa fa-pencil-square-o"></i>添加图片</a>
                                            <a class="btn red"
                                                href="{:url('partner/delgoods?goods_id='.$vo.goods_id)}"><i
                                                    class="fa fa-trash-o"></i>删除</a>
                                        </div>
                                    </td>
                                    <td align="" class="" style="width: 100%;">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </foreach>
                        </tbody>
                    </table>
                </div>
                <div class="iDiv" style="display: none;"></div>
            </div>
            <!--分页位置-->
            <!-- {$page} -->
        </div>
    </div>
    <script>
        function changegoods(goods_id, obj) {


            if ($(obj).hasClass('no')) {
                $(obj).removeClass('no').addClass('yes');
                $(obj).html("<i class='fa fa-check-circle'></i>是");
                var value = 1;

            } else if ($(obj).hasClass('yes')) {
                $(obj).removeClass('yes').addClass('no');
                $(obj).html("<i class='fa fa-ban'></i>否");
                var value = 2;
            } else {
                var value = $(obj).val();
            }
            $.ajax({
                url: "{:url('partner/changegoods')}",
                type: 'POST',
                data: { goods_id: goods_id, type: value },
                success: function (data) {
                    if (data['status'] == 1) {
                        layer.msg('更新成功', { icon: 1 });
                    } else {
                        return false;

                    }
                }

            })


        }



    </script>
</body>

</html>